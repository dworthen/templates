"""Main API function for the application."""

from dependency_injector.wiring import Provide, inject

from {{packageName}}.config import Config
from {{packageName}}.services import (
    LogService,
    ServiceContainer,
    load_service_container,
)


def main(config: Config):
    """Run main entry point for the application.

    Ensures the service container has been instantiated if users
    are not overriding the default service container. Then
    runs the main API function.
    """
    _ = load_service_container(config)
    _run()


@inject
def _run(logger: LogService = Provide[ServiceContainer.log_service]):
    """Run the main API function."""
    logger.info("Running main API function.")
    # Add main API function here
    print("Running main API function.")
    logger.info("Main API function complete.")
